{% extends "layout.html" %}
{% load static %}
{% load pipeline %}

{% block title %}Project Interconnectedness{% endblock %}

{% block head-meta %}
<meta name="csrf-token" content="{{ csrf_token }}">
{% endblock %}


{% block body-class %}grp-login{% endblock %}
{% block page-content %}

<div class="container results">
  <h2>Project Interconnectedness</h2>

  <div class="row">
    <div class="col-md-6">
      <div id="graph"></div>
    </div>

    <div class="col-md-3 chart-controls">

      <div class="form-group">
        <label>Choose institute:</label>
        <select class="select-institute">
          <option value="" selected="selected" disabled="disabled">Choose an institute</option>
        </select>
      </div>

      <div class="form-group">
        <label>View results by:</label>
        <select class="select-org-level">
          <option value="" selected="selected" disabled="disabled"></option>
        </select>
      </div>

      <div class="form-group">
        <label>Status:</label>
        <select class="select-status">
          <option value="" selected="selected">All</option>
          <option value="1">Ongoing</option>
          <option value="2">Complete</option>
        </select>
      </div>

      <div class="form-group">
        <label>Duration (years):</label>
        <select class="select-duration">
          <option value="" selected="selected">All</option>
          <option value="0">0-1.99</option>
          <option value="1">2-2.99</option>
          <option value="2">3-3.99</option>
          <option value="3">4-4.99</option>
          <option value="4">5+</option>
        </select>
      </div>

      <div id="units">
        <div id="unit-legend-meta">
          <ul>
            <li>Filter units below: (<a class="show-all-units">Show all</a>)</li>
          </ul>
        </div>
        <div id="unit-legend"></div>
      </div>
    </div>

    <div class="col-md-3 downloads pull-right">
      <form action="/results/" method="post" class='download-data pull-right'>
      {% csrf_token %}
      <input type="hidden" name="institute_id" value="">
      <input type="submit" class="btn btn-default btn-xs" value="Download data">
    </div>

  </div>
</div>
{% endblock %}

{% block extra-js %}
  <script type="text/javascript">
    var DATA = {{ data|safe }};
  </script>
  <script src="{% static 'javascript/graph.js' %}"></script>
{% endblock %}
